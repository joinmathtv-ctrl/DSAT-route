<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>DSAT Practice — Classic UI</title>

<link rel="preconnect" href="https://cdn.jsdelivr.net">
<script defer id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

<!-- 공통 스타일 -->
<link rel="stylesheet" href="./assets/style.css">

<!-- 커브 프리셋: 메인 스크립트보다 먼저 로드 -->
<script src="./assets/curves.presets.js"></script>
</head>
<body>

<!-- ===== TOP BAR ===== -->
<div class="topbar">
  <div class="topbar-row">
    <div class="dir-zone">
      <div class="crumb" id="crumb">Section — Module</div>
      <button class="dir-btn" id="dirToggle">Directions ▾</button>
      <div class="dir-panel" id="dirPanel"></div>
    </div>
    <div class="timer-wrap">
      <span class="timer" id="timer">35:00</span>
      <button class="hide-btn" id="hideBtn">Hide</button>
    </div>
    <div class="controls">
      <button class="icon-btn">🔢 Calculator</button>
      <button class="icon-btn">📄 Reference</button>
      <button class="icon-btn">⋯ More</button>
      <button class="icon-btn" onclick="location.href='./dashboard.html'">📈 Dashboard</button>
    </div>
  </div>
  <div class="dash"></div>
</div>

<div class="wrap">
  <!-- 로더 -->
  <div class="loader" id="loaderRow">
    <input id="path" type="text" value="./questions.json" />
    <button class="btn" id="loadBtn">Load set</button>
    <input id="file" type="file" accept=".json,application/json" style="margin-left:10px"/>
  </div>
  <div id="loadError" class="alert" style="display:none"></div>

  <!-- 문제 카드 -->
  <div class="qcard" id="card" style="display:none">
    <div class="qhead">
      <div class="qnum" id="qnum">1</div>
      <button id="flagBtn" class="flag-btn">Mark for Review</button>
    </div>
    <div class="qtitle" id="qtitle"></div>
    <div id="qcontainer"></div>
  </div>

  <div id="scoreBox"></div>
</div>

<!-- ===== 하단 고정 리본 ===== -->
<div class="ribbon" id="ribbon" style="display:none">
  <div class="r-left">
    <button type="button" class="btn" id="prevBtn">← Prev</button>
  </div>
  <div class="r-center">
    <button class="btn ghost" id="navOpen">1 / 22 ▾</button>
  </div>
  <div class="r-right">
    <button type="button" class="btn" id="nextBtn">Next →</button>
  </div>
</div>

<!-- 네비 팝업 -->
<div class="nav-popup" id="navPopup">
  <div style="font-weight:700; margin-bottom:8px"><span id="navSection">Section</span> · Module <span id="navMod">1</span></div>
  <div class="nav-grid" id="navGrid"></div>
</div>

<!-- ===== 제출 확인 모달 ===== -->
<div class="modal-back" id="confirmBack">
  <div class="modal">
    <div class="head">Submit now?</div>
    <div class="body">
      <div style="margin-bottom:8px">You are submitting <b id="confirmModLabel">Section · Module</b>.</div>
      <ul style="margin:0; padding-left:18px; color:var(--muted); font-size:14px">
        <li>After submission, answers for this module can no longer be changed.</li>
        <li>If this is Module 1 in a section, Module 2 in the same section will start automatically.</li>
        <li>After the final module (Math Module 2), a combined report and explanations will be shown.</li>
      </ul>
    </div>
    <div class="foot">
      <button class="btn" id="confirmCancel">Cancel</button>
      <button class="btn primary" id="confirmOk">OK</button>
    </div>
  </div>
</div>

<!-- ===== 해설 팝업 ===== -->
<div class="explain-back" id="explainBack">
  <div class="explain">
    <button class="x" id="explainClose">Close</button>
    <div id="explainBody"></div>
  </div>
</div>

<!-- 분리 스크립트 -->
<script src="./assets/app.js"></script>
</body>
</html>
