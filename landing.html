<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Start DSAT Practice</title>
<style>
  body{font-family:system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; background:#f6f7fb; color:#111; margin:0}
  .wrap{max-width:720px; margin:40px auto; background:#fff; border:1px solid #e5e7eb; border-radius:14px; padding:20px; box-shadow:0 8px 24px rgba(0,0,0,.05)}
  h1{margin:4px 0 16px 0; font-size:22px}
  .row{display:grid; grid-template-columns:140px 1fr; gap:12px; align-items:center; margin:12px 0}
  input[type=text]{width:100%; padding:10px 12px; border:1px solid #e5e7eb; border-radius:10px}
  input[type=file]{border:1px dashed #d1d5db; border-radius:10px; padding:10px; background:#fafafa}
  .btn{border:1px solid #2563eb; background:#2563eb; color:#fff; padding:12px 16px; border-radius:10px; cursor:pointer; font-weight:700}
  .btn:disabled{opacity:.5; cursor:not-allowed}
  .note{color:#6b7280; font-size:13px}
  .or{ text-align:center; color:#9ca3af; margin:8px 0 }
</style>
</head>
<body>
  <div class="wrap">
    <h1>디지털 SAT 연습 — 세트 선택</h1>

    <div class="row">
      <label>JSON URL</label>
      <input id="jsonUrl" type="text" placeholder="예: https://example.com/questions.json"/>
    </div>
    <div class="or">또는</div>
    <div class="row">
      <label>로컬 파일</label>
      <input id="jsonFile" type="file" accept=".json,application/json"/>
    </div>
    <div class="row">
      <div></div>
      <div class="note">둘 중 하나만 선택하세요. URL이 있으면 파일은 무시됩니다.</div>
    </div>

    <div class="row" style="margin-top:18px">
      <div></div>
      <button id="startBtn" class="btn">시험 시작</button>
    </div>
  </div>

<script>
const $ = s=>document.querySelector(s);
$('#startBtn').onclick = async ()=>{
  const url = $('#jsonUrl').value.trim();
  const file = $('#jsonFile').files[0];

  if (url) {
    // URL 모드: index.html이 직접 가져가도록 쿼리로 넘김
    location.href = `./index.html?set=${encodeURIComponent(url)}`;
    return;
  }
  if (file) {
    // 파일 모드: 텍스트를 localStorage에 보관 후 페이지 이동
    try{
      const text = await file.text();
      localStorage.setItem('dsat_launch_blob', text);
      location.href = `./index.html?source=blob`;
    }catch(e){
      alert('파일 읽기 실패: '+e.message);
    }
    return;
  }
  alert('JSON URL을 입력하거나, 로컬 JSON 파일을 선택하세요.');
};
</script>
</body>
</html>
